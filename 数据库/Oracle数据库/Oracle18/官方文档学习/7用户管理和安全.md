# 管理用户账号和安全

## 用户账号

> 用户要访问您的数据库，您必须创建用户帐户，并授予这些帐户适当的数据库访问权限。用户帐户由用户名标识，并定义用户的属性，包括以下内容：

- 身份验证方法
- 数据库身份验证的密码
- 永久和临时数据存储的默认表空间
- 表空间配额
- 帐户状态（锁定或解锁）
- 密码状态（过期与否）

> 创建用户帐户时，不仅必须为该帐户分配用户名、密码和默认表空间，还必须执行以下操作：

- 向帐户授予适当的系统权限、对象权限和角色。
- 如果用户将创建数据库对象，则为用户帐户在将创建对象的每个表空间上分配空间使用配额。

### 预定义用户账户

1. 数据库会自动创建多个用户账户
2. 除了sys system 账号 其他账号都是锁定且密码过期的
3. **锁定帐户**是禁用登录的帐户。您不能删除内部帐户，也不得使用它们登录到数据库。

### 普通用户

> 公共用户是数据库用户，该用户在根数据库以及每个现有和未来可插入数据库 （PDB） 中具有相同的标识。每个公共用户可以连接到根目录内以及在公共用户具有权限的任何 PDB 内执行操作。

**特征**

- 普通用户可以登录到具有权限的任何容器（包括 ）。`CDB$ROOT``CREATE SESSION`

  普通用户不必在每个容器中具有相同的权限。例如，用户可能具有在根目录和一个 PDB 中创建会话的权限，但不必在不同 PDB 中创建会话。由于具有适当权限的通用用户可以在容器之间切换，因此根中的普通用户可以管理 PD。`c##dba`

- 创建普通用户需要以`c##/C##`开头 。（Oracle 提供的通用用户名没有此限制。

  本地用户名不得以字符或 开始。`c##``C##`

- 普通用户的名称必须仅包含 ASCII 或 EBCDIC 字符。

- 每个公共用户在所有容器中都有唯一的命名。

  公共用户驻留在根中，但必须能够连接到具有相同标识的每个 PDB。

- 每个容器中，普通用户的架构可能不同。

  例如，如果是对多个容器具有权限的通用用户，则每个容器中的架构可能包含不同的对象。`c##dba``c##dba`

## 用户权限和角色

> 用户权限提供基本的数据库安全性级别。它们旨在控制用户对数据的访问并限制用户可以执行的 SQL 语句类型。创建用户时，应授予权限以使用户能够连接到数据库、运行查询和进行更新、创建架构对象等。

用户权限的主要类型如下：

- **系统权限**– system 特权使用户可以执行特定操作，或对特定类型的任何架构对象执行操作。例如，系统特权允许用户在与该用户关联的架构中创建表，并且系统特权允许用户创建数据库用户。`CREATE TABLE``CREATE USER`
- **对象权限**-对象特权使用户可以对特定架构对象执行特定操作。不同类型的架构对象具有不同的对象权限。从表中选择行或从表中删除行的权限是对象权限的示例。`EMPLOYEES``DEPARTMENTS`

| 角色名称   | 描述                                                         |
| :--------- | :----------------------------------------------------------- |
| `CONNECT`  | 使用户能够连接到数据库。将此角色授予任何需要数据库访问的用户或应用程序。 |
| `RESOURCE` | 使用户能够创建、修改和删除与该用户关联的架构中某些类型的架构对象。仅向开发人员和必须创建架构对象的其他用户授予此角色。此角色授予创建对象系统权限的子集。例如，它授予系统特权，但不授予系统特权。它只授予以下特权： ， ， ， ， ， ， ， ，`CREATE TABLE``CREATE VIEW``CREATE CLUSTER``CREATE INDEXTYPE``CREATE OPERATOR``CREATE PROCEDURE``CREATE SEQUENCE``CREATE TABLE``CREATE TRIGGER``CREATE TYPE` |
| `DBA`      | 使用户能够执行大多数管理功能，包括创建用户和授予权限;创建和授予角色;在任何架构中创建、修改和删除架构对象;和更多。它授予所有系统权限，但不包括启动或关闭数据库实例的权限。默认情况下，它授予用户 和 。`SYS``SYSTEM` |

### 公共角色

> 一个公共角色是存在于根目录以及每个现有和未来可插拔数据库 （PDB） 中的数据库角色。公共角色对于跨容器操作很有用，可确保公共用户在每个容器中都有角色。

用户只能对公共角色执行常见操作，例如，在满足以下条件时通常授予该角色的权限：

- 用户是当前容器为 root 的通用用户。
- 用户通常具有授予的权限，这意味着该权限适用于所有容器。`SET CONTAINER`
- 用户具有控制执行指定操作的能力的权限，并且通常已授予此权限。

### 本地用户

> 本地角色仅存在于单个可插入数据库 （PDB） 中，就像非 CDB 中的角色仅存在于非 CDB 中一样。本地角色只能包含应用于角色存在的容器中的角色和特权。
>
> 同一多租户容器数据库 （CDB） 中的 PD 可以包含具有相同名称的本地角色。例如，用户创建的角色可能同时存在于 和 PD 中。这些角色是完全独立的，就像它们在单独的非 CB 中一样。`pdbadmin``hrpdb``salespdb`

### 特权和角色授予

1. 多租户容器CDB 中的用户可以授予角色和特权
2. 本地用户通常不能授予角色和特权

## 管理账户和特权

### SYS和系统用户

> 安装 Oracle 数据库时，将自动创建 和管理用户帐户。它们都是使用安装时提供的密码创建的，并且它们都自动授予该角色。`SYS``SYSTEM``DBA`

- `SYS`

  此帐户可以执行所有管理功能。数据库数据字典的所有基本（基础）表和视图都存储在架构中。这些基表和视图对于 Oracle 数据库的操作至关重要。为了保持数据字典的完整性，架构中的表仅由数据库操作。任何用户或数据库管理员都不应修改它们。不得在架构中创建任何表。

  向用户授予该权限，使用户能够执行高级管理任务，如备份和恢复。`SYS``SYSDBA`

- `SYSTEM`

  此帐户可以执行除以下功能之外的所有管理功能：

  - 备份和恢复
  - 数据库升级

> 注意
>
> `：SYSBACKUP`是另一个自动创建的帐户，用于执行备份和恢复。有关详细信息[，请参阅"配置用户以执行备份](https://docs.oracle.com/en/database/oracle/oracle-database/18/admqs/performing-backup-and-recovery.html#GUID-517EDF8B-C2C7-4658-BB4B-2E808A5D1015)和恢复"。

### SYSDBA和SYSOPER系统特权

1. `SYSDBA` `和 SYSOPER`是执行高级管理操作（如创建、启动、关闭、备份或恢复数据库）所需的管理权限。
2. 系统权限用于完全授权的数据库管理员，系统特权允许用户执行基本操作任务，但无法查看用户数据。`SYSDBA``SYSOPER`

> 注意：当您以用户`SYS 方式连接`时，对数据字典表具有无限的权限。确保不修改任何数据字典表。

## 管理角色

> **角色**被命名为相关系统和对象权限的组。创建角色，然后将它们分配给用户和其他角色。

### 查看角色

1. 使用管理员权限的用户登录
2. 从"**安全"**菜单中选择**"角色"。**

### 创建角色

| 特权                 | 描述                                       |
| :------------------- | :----------------------------------------- |
| `CREATE` `TABLE`     | 使用户能够创建、修改和删除其架构中的表。   |
| `CREATE` `VIEW`      | 允许用户创建、修改和删除其架构中的视图。   |
| `CREATE` `PROCEDURE` | 允许用户创建、修改和删除其架构中的过程。   |
| `CREATE` `TRIGGER`   | 允许用户创建、修改和删除其架构中的触发器。 |
| `CREATE` `SEQUENCE`  | 使用户能够创建、修改和删除其架构中的序列。 |
| `CREATE` `SYNONYM`   | 允许用户创建、修改和删除其架构中的同义词。 |



### 修改角色

> 您可以使用 Oracle 企业管理器数据库快递 （EM Express） 修改角色。例如，假设您的应用程序使用 Oracle 流高级队列，并且您确定必须授予开发人员角色并开发和测试其应用程序。您可以编辑角色以授予它这两个高级队列角色。`AQ_ADMINISTRATOR_ROLE``AQ_USER_ROLE``APPDEV`

要修改 APPDEV 角色：

1. 在 EM Express 中，转到角色页面，如"查看角色["中](https://docs.oracle.com/en/database/oracle/oracle-database/18/admqs/administering-user-accounts-and-security.html#GUID-621A1160-A4AE-4093-83B5-C05CD1CC82C9)所述。

2. 选择角色，从"操作"**菜单中选择****"更改权限"。**`APPDEV`

   将显示"更改权限"页。

3. 将 和 角色从左侧的可用系统权限和角色表移动到右侧选定的系统权限和角色表，以授予角色这两个角色。`AQ_ADMINISTRATOR_ROLE``AQ_USER_ROLE``APPDEV`

4. 单击**"确定"。**

   将显示确认语句。

### 删除角色

> 您可以使用 Oracle 企业管理器数据库快递 （EM Express） 删除角色。删除角色时要小心，因为 EM Express 会删除角色，即使该角色当前已授予一个或多个用户。删除（删除）角色会自动从已授予该角色的所有用户中删除与该角色关联的权限。

要删除角色：

1. 在 EM Express 中，转到角色页面，如"查看角色["中](https://docs.oracle.com/en/database/oracle/oracle-database/18/admqs/administering-user-accounts-and-security.html#GUID-621A1160-A4AE-4093-83B5-C05CD1CC82C9)所述。

2. 选择要删除的角色，然后单击"删除**角色"。**

   将显示一个确认页。

3. 单击**"确定"。**

   确认消息指示已成功删除该角色。

## 管理数据库用户账户

## 设置数据库密码策略

### 关于密码策略

创建用户帐户时，默认密码策略将分配给该用户帐户。新安装的数据库的默认密码策略包括以下指令：

- 用户帐户的密码将在 180 天后自动过期。
- 用户帐户在密码过期 7 天后被锁定。
- 在 10 次登录尝试失败后，用户帐户将被锁定 1 天。

另请参阅：

- [创建密码配置文件](https://docs.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/admqs&id=DBSEG443)的示例的 Oracle 数据库安全指南
- [有关 SQL 语句的](https://docs.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/admqs&id=SQLRF01310)有关详细信息，请参阅 Oracle 数据库 SQL 语言参考`CREATE PROFILE`

### 修改密码策略

## 管理用户账户和安全

## 示例